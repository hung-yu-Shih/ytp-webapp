<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>AI 台北行旅工具</title>
<link rel="stylesheet" href="style.css">
</head>

<body>
<div class="app">

    <!-- Header -->
    <header class="app-header">
        <h1>AI 台北行旅工具</h1>
        <button id="settingBtn" class="setting-btn">⚙</button>
    </header>

    <!-- Project Section -->
    <main class="project-container">
        <div class="project-card">
            <h2>建立行程專案</h2>
            <button class="create-btn">＋ 新專案</button>
        </div>

        <div class="project-card">
            <h3>東京五日遊</h3>
            <p>尚未設定內容</p>
        </div>

        <div class="project-card">
            <h3>台南兩日放空</h3>
            <p>尚未設定內容</p>
        </div>
    </main>

</div>

<!-- 右側設定面板 -->
<div id="overlay"></div>

<div id="settingPanel">
    <div class="panel-handle"></div>

    <h2>設定</h2>

    <div class="setting-item">
        <label>暗色模式</label>
        <label class="switch">
            <input type="checkbox" id="darkToggle">
            <span class="slider"></span>
        </label>
    </div>
</div>


<script>
const settingBtn = document.getElementById("settingBtn");
const settingPanel = document.getElementById("settingPanel");
const overlay = document.getElementById("overlay");
const darkToggle = document.getElementById("darkToggle");

let startX = 0;
let currentX = 0;
let isDragging = false;

/* =========================
   設定面板開關
========================= */

function openPanel() {
    settingPanel.classList.add("open");
    overlay.classList.add("show");
}

function closePanel() {
    settingPanel.classList.remove("open");
    overlay.classList.remove("show");
}

settingBtn.addEventListener("click", openPanel);
overlay.addEventListener("click", closePanel);


/* =========================
   滑動關閉 + 回彈效果
========================= */

settingPanel.addEventListener("touchstart", (e) => {
    startX = e.touches[0].clientX;
    isDragging = true;
});

settingPanel.addEventListener("touchmove", (e) => {
    if (!isDragging) return;
    currentX = e.touches[0].clientX;
    let diff = currentX - startX;

    if (diff > 0) {
        settingPanel.style.transform = `translateX(${diff}px)`;
    }
});

settingPanel.addEventListener("touchend", () => {
    isDragging = false;

    let diff = currentX - startX;

    if (diff > 100) {
        closePanel();
    }

    settingPanel.style.transform = "";
});


/* =========================
   暗色模式 + 記憶
========================= */

if (localStorage.getItem("darkMode") === "true") {
    document.body.classList.add("dark");
    darkToggle.checked = true;
}

darkToggle.addEventListener("change", () => {
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode", darkToggle.checked);
});
</script>

</body>
</html>
